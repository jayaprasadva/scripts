#!/bin/bash
## Installs MyAppList generated by https://github.com/fedefernandez/MyAppList

set -o nounset -o pipefail -o errexit

if [ -z "${1:-}" ]
then
    echo "Please pass myapplist XML file path as parameter." 1>&2
    exit 1
fi

myapplist_xml_file="$1"
action="${2:-install}"

sed --quiet --regexp-extended 's/.*package="([^"]+)".*/\1/p;' "$myapplist_xml_file" | while read -r appid
do
    fdroidcl "$action" "$appid" || :
done
